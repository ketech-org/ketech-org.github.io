{{ define "main" }}
{{ partial "page-header" . }}

<section class="section pt-0">
    <div class="container">
        <div class="row justify-center">
            {{ range .Pages }}
            <div class="mb-8 lg:col-4 md:col-6 sm:col-12">
                <div
                    class="h-full rounded-2xl bg-light dark:bg-darkmode-light p-8 text-center shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1 border border-light dark:border-darkmode-border flex flex-col items-center">

                    {{/* App Icon */}}
                    <div class="mb-6 h-36 w-36 overflow-hidden rounded-[22%] shadow-md bg-white">
                        {{ $icon := .Resources.GetMatch "icon*" }}
                        {{ if $icon }}
                        <img src="{{ $icon.RelPermalink }}" alt="{{ .Title }}" class="h-full w-full object-cover">
                        {{ else }}
                        {{/* Fallback to frontmatter image if not found as resource */}}
                        {{ with .Params.images }}
                        <img src="{{ index . 0 | relURL }}" alt="{{ $.Title }}" class="h-full w-full object-cover">
                        {{ end }}
                        {{ end }}
                    </div>

                    <h3 class="h4 mb-3">
                        <a href="{{ .Permalink }}"
                            class="block hover:text-primary transition-colors text-text-dark dark:text-white">
                            {{ .Title }}
                        </a>
                    </h3>

                    <p class="mb-6 text-text-dark dark:text-white flex-grow">
                        {{ .Params.description }}
                    </p>

                    <a href="{{ .Permalink }}" class="btn btn-primary rounded-full px-8 py-2 mt-auto">
                        Learn More
                    </a>
                </div>
            </div>
            {{ end }}
        </div>
    </div>
</section>
{{ end }}